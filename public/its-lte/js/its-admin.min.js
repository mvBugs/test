$(function(){"use strict";const e=$("html").attr("lang")||"ru";$(document).ajaxStart(function(){Pace.restart()}),$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".field-select2-change-status-ajax").each(function(){var t=$(this),a=t.find(".select2-change-status-ajax"),n=t.data("route");a.select2({language:e,tags:!1}).on("select2:select",function(e){t.find(".overlay").removeClass("hidden"),$.ajax({method:"GET",url:n,dataType:"json",data:{value:e.params.data.id},success:function(e){t.append('<div class="text-success">'+e.message+"</div>"),t.find(".text-success").delay(2e3).fadeOut(500,"linear",function(){$(this).remove()})},error:function(){console.log("Error Ajax!"),t.append('<div class="text-danger">Error Ajax</div>'),t.find(".text-danger").delay(2e3).fadeOut(500,"linear",function(){$(this).remove()})},complete:function(){t.find(".overlay").addClass("hidden")}})})}),$(".field-select2-tree-ajax").each(function(){var e=$(this),t=e.find(".select2-tree"),a=e.data("route"),n=e.data("valFld")?e.data("valFld"):"id",i=e.data("labelFld")?e.data("labelFld"):"name",l=e.data("incFld")?e.data("incFld"):"children";$.ajax({method:"GET",url:a,dataType:"json",data:{data:""},success:function(e){t.select2ToTree({treeData:{dataArr:e.data,dftVal:e.default,valFld:n,labelFld:i,incFld:l}})},error:function(){console.log("Error Ajax!")},complete:function(){e.find(".overlay").fadeOut(200)}})}),$(".field-tree").each(function(){var e=$(this),t=e.find(".field-tree-data"),a=e.data("route"),n=void 0===e.data("showCheckbox")||e.data("showCheckbox"),i=void 0!==e.data("showIcon")&&e.data("showIcon"),l=e.data("field-name"),s=e.find(".field-tree-inputs"),r=function(e){s.html("");return e.forEach(e=>{s.append('<input type="hidden" name="'+l+'[]" value="'+e.id+'" />')}),[]};$.ajax({method:"GET",url:a,dataType:"json",data:{data:""},success:function(e){t.treeview({data:e,showIcon:i,showCheckbox:n}),r(t.treeview("getChecked")),t.on("nodeChecked",function(e,t){r($(this).treeview("getChecked"))}),t.on("nodeUnchecked",function(e,t){r($(this).treeview("getChecked"))})},error:function(){console.log("Error Ajax!")},complete:function(){e.find(".overlay").fadeOut(200)}})}),$(".field-x-editable").length&&$(".field-x-editable").editable(xEditable||{}),$(".js-delete-action").on("click",function(e){if(e.preventDefault(),confirm("Підтверджуєте видалення?")){var t=$("#delete-form");t.attr("action",$(this).data("url")),t.submit()}}),$(".select2:not(.field-select-ajax):not(.sortable)").length&&$(".select2:not(.field-select-ajax):not(.sortable)").select2({language:"ru",tags:!1}),$(".select2.sortable").length&&($(".select2.sortable").select2({language:"ru",tags:!0}),$(".select2.sortable").on("select2:select",function(e){var t=e.params.data.element,a=$(t);a.detach(),$(this).append(a),$(this).trigger("change")})),$(".select2.field-select-ajax").length&&$(".select2.field-select-ajax").each(function(t){var a=$(this).data("route");$(this).select2({language:e,tags:!1,ajax:{delay:250,url:a,dataType:"json"}})}),$(".lte-daterangepicker").each(function(){$(this).on("apply.daterangepicker",function(e,t){$(this).val(t.startDate.format("MM/DD/YYYY")+" - "+t.endDate.format("MM/DD/YYYY"));var a=$(this).data("input-name-start"),n=$(this).data("input-name-end");$(this).siblings('input[name="'+a+'"]').val(t.startDate.format("MM/DD/YYYY")),$(this).siblings('input[name="'+n+'"]').val(t.endDate.format("MM/DD/YYYY"))}),$(this).on("cancel.daterangepicker",function(e,t){$(this).val("")}),$(this).daterangepicker({autoUpdateInput:!1,locale:translates.localeDateRangePicker||{format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",weekLabel:"W",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}})}),$('[data-toggle="tooltip"]').tooltip(),$(".js-fill-fields-modal").on("click",function(e){e.preventDefault();var t=$(this),a=t.data("url"),n=t.data("fields"),i=$(t.data("target"));for(var l in a&&i.find("form").attr("action",a),n)i.find('[name="'+l+'"]').val(n[l]);i.modal()});var t={};if($(".tree-sortable").length&&$(".tree-sortable").each(function(){t[$(this).data("entity-name")]=$(this).sortable({group:"serialization",delay:500,handle:".handle",onDrop:function(e,t,a){a(e,t)}})}),$(document).on("click",".post-tree-sortaple",function(e){e.preventDefault(),e.stopPropagation();var a=$(this),n=t[$(this).data("entity-name")].sortable("serialize").get(),i=$(this).data("route");$.ajax({method:"POST",url:i,dataType:"json",data:{data:n},beforeSend:function(){a.attr("disabled",!0).find(".fa").toggleClass("fa-spin").toggleClass("fa-refresh")},success:function(e){console.log(e)},error:function(){console.log("Error Ajax!")},complete:function(){a.attr("disabled",!1).find(".fa").toggleClass("fa-spin").toggleClass("fa-refresh")}})}),$("#revenue-chart").length)new Morris.Area({element:"revenue-chart",resize:!0,data:chartOrders.data||[{y:"2012-01",new:2666,success:2666},{y:"2012-02",new:2778,success:2294},{y:"2012-03",new:4912,success:1969},{y:"2012-04",new:3767,success:3597},{y:"2012-05",new:6810,success:1914},{y:"2012-06",new:5670,success:4293},{y:"2012-07",new:4820,success:3795},{y:"2012-08",new:15073,success:15073},{y:"2012-09",new:10687,success:4460},{y:"2012-10",new:8432,success:5713},{y:"2012-11",new:8432,success:5713},{y:"2012-12",new:8432,success:5713}],xkey:"y",ykeys:["new","success"],labels:chartOrders.labels||["Нові","Підтверджені"],lineColors:["#00c0ef","#00a65a"],hideHover:"auto"});$("textarea.ck-editor.ck-mini").length&&$("textarea.ck-editor.ck-mini").ckeditor(ckMini||{}),$("textarea.ck-editor.ck-small").length&&$("textarea.ck-editor.ck-small").ckeditor(ckSmall||{}),$("textarea.ck-editor.ck-full").length&&$("textarea.ck-editor.ck-full").ckeditor(ckFull||{}),$(".field-links").length&&($(".field-links").on("click",".btn-info",function(e){e.preventDefault();var t=$(this).parents(".field-links").find(".btn-info").index(this),a=$(this).parents(".field-links").find(".btn-info").length,n=$(this).parents(".field-links").data("field-name"),i=$(this).parents(".field-links").data("key"),l=$(this).parents(".field-links").data("value"),s='<tr class="item"><td><div class="input-group input-group-md"><input type="text" name="'+n+"["+a+"]["+i+']" class="form-control" placeholder="'+$(this).parents(".field-links").data("placeholder-key")+'"><span class="input-group-btn" style="width: 40%"><input type="text" name="'+n+"["+a+"]["+l+']" class="form-control" placeholder="'+$(this).parents(".field-links").data("placeholder-value")+'"></span><span class="input-group-btn"><button type="button" class="btn btn-info btn-flat"><i class="fa fa-plus"></i></button><button type="button" class="btn btn-danger btn-flat"><i class="fa fa-remove"></i></button></span></div></td></tr>"';$(this).parents(".field-links").find(".item").eq(t).after(s)}),$(".field-links").on("click",".btn-danger",function(e){e.preventDefault();var t=$(this).parents(".field-links").find(".btn-danger:not(.first)").index(this);$(this).parents(".field-links").find(".item").eq(t).remove()})),$(".field-more-items-sortable").length&&($(".field-more-items-sortable .todo-list").sortable({handle:".handle",onDrop:function(e,t,a){a(e,t),$(t.target[0]).find("li").each(function(e){$(this).find(".field-weight-item").val(e)})}}),$(".field-more-items-sortable").on("click",".filed-remove",function(e){e.preventDefault(),$(this).parents("li").hide().find(".field-delete-item").val($(this).data("id"))})),$(".field-more-items").length&&$(".field-more-items").on("click",".filed-remove",function(e){e.preventDefault(),$(this).parents("tr").hide().find(".field-delete-item").val($(this).data("id"))})})});
